
2025-10-23 10:16:51 - [INFO] --- Stage 1: Collecting Required Deployment Parameters ---
Enter Git Repository URL (e.g., https://github.com/user/repo.git): Enter Git Personal Access Token (PAT - Input hidden): 
Enter Remote Server SSH Username (e.g., ubuntu, ec2-user): Enter Remote Server IP Address: Enter Path to SSH Private Key (e.g., /c/Users/emman/.ssh/hng-devops-key.pem): Enter branch name (Default: main): 
2025-10-23 10:21:50 - [INFO] Using branch: main

2025-10-23 10:21:50 - [INFO] Application Internal Port is fixed at: 8080

2025-10-23 10:21:50 - [INFO] Parameters collected and validated successfully.

2025-10-23 10:21:50 - [INFO] --- Stage 2: Cloning/Pulling Repository ---

2025-10-23 10:21:51 - [INFO] Repository directory exists. Pulling latest code...
From https://github.com/Hemmie001/automated-deployment_bash-script
   5342174..6a735b0  main       -> origin/main
Updating 5342174..6a735b0
Fast-forward
 cloned_repo                |   1 +
 deploy.sh                  |  51 +++++-----
 deploy2.sh                 | 218 ++++++++++++++++++++++++++++++++++++++++++
 deploy_20251022_221906.log |   4 +
 deploy_20251022_222719.log |  10 ++
 deploy_20251022_224818.log |  10 ++
 deploy_20251022_225708.log | 232 +++++++++++++++++++++++++++++++++++++++++++++
 deploy_20251022_230840.log |  58 ++++++++++++
 deploy_20251022_235630.log |  58 ++++++++++++
 deploy_20251023_001441.log |   1 +
 10 files changed, 620 insertions(+), 23 deletions(-)
 create mode 160000 cloned_repo
 create mode 100644 deploy2.sh
 create mode 100644 deploy_20251022_221906.log
 create mode 100644 deploy_20251022_222719.log
 create mode 100644 deploy_20251022_224818.log
 create mode 100644 deploy_20251022_225708.log
 create mode 100644 deploy_20251022_230840.log
 create mode 100644 deploy_20251022_235630.log
 create mode 100644 deploy_20251023_001441.log
Your branch is up to date with 'origin/main'.
Already on 'main'

2025-10-23 10:22:00 - [INFO] Repository synchronized and validated. Code is ready for transfer.

2025-10-23 10:22:00 - [INFO] --- Stage 3: Establishing Remote Connection and Checking Access ---
SSH connection successful

2025-10-23 10:22:06 - [INFO] SSH connectivity test passed.

2025-10-23 10:22:06 - [INFO] --- Stage 4: Preparing Remote Host (Installing Docker/Nginx) ---

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Hit:1 http://us-west-2.ec2.archive.ubuntu.com/ubuntu noble InRelease
Hit:2 http://us-west-2.ec2.archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:3 http://us-west-2.ec2.archive.ubuntu.com/ubuntu noble-backports InRelease
Hit:4 http://security.ubuntu.com/ubuntu noble-security InRelease
Reading package lists...
Building dependency tree...
Reading state information...
23 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists...
WARNING: apt does not have a stable CLI interface. Use with caution in scripts.


Building dependency tree...
Reading state information...
docker.io is already the newest version (28.2.2-0ubuntu1~24.04.1).
docker-compose is already the newest version (1.29.2-6ubuntu1).
nginx is already the newest version (1.24.0-2ubuntu7.5).
0 upgraded, 0 newly installed, 0 to remove and 23 not upgraded.
Synchronizing state of nginx.service with SysV service script with /usr/lib/systemd/systemd-sysv-install.
Executing: /usr/lib/systemd/systemd-sysv-install enable nginx

2025-10-23 10:22:18 - [INFO] Remote environment prepared: Docker, Docker Compose, and NGINX are installed and running.

2025-10-23 10:22:18 - [INFO] --- Stage 5: Deploying Application (Transfer and Build) ---

2025-10-23 10:22:18 - [INFO] Transferring project files from local machine to /opt/devops_app...
scp: stat remote: No such file or directory
scp: stat remote: No such file or directory
scp: dest open "/opt/devops_app/deploy.sh": Permission denied
scp: upload "./cloned_repo/./deploy.sh" to "/opt/devops_app/deploy.sh" failed
scp: dest open "/opt/devops_app/deploy2.sh": Permission denied
scp: upload "./cloned_repo/./deploy2.sh" to "/opt/devops_app/deploy2.sh" failed
scp: dest open "/opt/devops_app/deploy_20251022_221906.log": Permission denied
scp: upload "./cloned_repo/./deploy_20251022_221906.log" to "/opt/devops_app/deploy_20251022_221906.log" failed
scp: dest open "/opt/devops_app/deploy_20251022_222719.log": Permission denied
scp: upload "./cloned_repo/./deploy_20251022_222719.log" to "/opt/devops_app/deploy_20251022_222719.log" failed
scp: dest open "/opt/devops_app/deploy_20251022_224818.log": Permission denied
scp: upload "./cloned_repo/./deploy_20251022_224818.log" to "/opt/devops_app/deploy_20251022_224818.log" failed
scp: dest open "/opt/devops_app/deploy_20251022_225708.log": Permission denied
scp: upload "./cloned_repo/./deploy_20251022_225708.log" to "/opt/devops_app/deploy_20251022_225708.log" failed
scp: dest open "/opt/devops_app/deploy_20251022_230840.log": Permission denied
scp: upload "./cloned_repo/./deploy_20251022_230840.log" to "/opt/devops_app/deploy_20251022_230840.log" failed
scp: dest open "/opt/devops_app/deploy_20251022_235630.log": Permission denied
scp: upload "./cloned_repo/./deploy_20251022_235630.log" to "/opt/devops_app/deploy_20251022_235630.log" failed
scp: dest open "/opt/devops_app/deploy_20251023_001441.log": Permission denied
scp: upload "./cloned_repo/./deploy_20251023_001441.log" to "/opt/devops_app/deploy_20251023_001441.log" failed
scp: dest open "/opt/devops_app/dockerfile": Permission denied
scp: upload "./cloned_repo/./dockerfile" to "/opt/devops_app/dockerfile" failed
scp: dest open "/opt/devops_app/index.html": Permission denied
scp: upload "./cloned_repo/./index.html" to "/opt/devops_app/index.html" failed
scp: dest open "/opt/devops_app/README.md": Permission denied
scp: upload "./cloned_repo/./README.md" to "/opt/devops_app/README.md" failed
scp: remote setstat "/opt/devops_app": Permission denied
scp: failed to upload directory ./cloned_repo/. to /opt/devops_app

2025-10-23 10:22:29 - [FATAL] SCP file transfer failed.
Deployment failed. Check deploy_20251023_101651.log for details.
